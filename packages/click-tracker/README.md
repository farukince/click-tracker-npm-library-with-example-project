<div align="center">
  <img src="https://raw.githubusercontent.com/google/material-design-icons/master/png/action/touch_app/materialicons/48dp/2x/baseline_touch_app_black_48dp.png" alt="Logo" width="60">
  <h1>Supabase Click Tracker</h1>
  <p>Effortless click analytics for your Supabase project.</p>
  
  <p>
    <a href="https://www.npmjs.com/package/@farukiince/click-tracker">
      <img src="https://img.shields.io/npm/v/@farukiince/click-tracker.svg" alt="NPM Version">
    </a>
    <a href="https://github.com/farukince/click-tracker-npm-library-with-example-project/blob/main/LICENSE">
      <img src="https://img.shields.io/npm/l/@farukiince/click-tracker.svg" alt="License">
    </a>
  </p>
</div>

---

This lightweight TypeScript library automatically captures button clicks and sends the data—along with a custom payload—directly to your Supabase database. No complex setup, no third-party services.

## Get Started in 3 Steps

### 1. Prepare Supabase

Create a `clicks` table in your Supabase database. You can use the SQL editor with the following command:

```sql
CREATE TABLE public.clicks (
  id bigint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  created_at timestamp with time zone DEFAULT now() NOT NULL,
  button_id text,
  button_classes text,
  button_text text,
  payload jsonb
);

-- Then, enable public insert access via RLS policies.
-- Go to Authentication -> Policies to create a new policy for INSERT with a check expression of `true`.
```

### 2. Install The Package

```bash
npm install @farukiince/click-tracker
```

### 3. Initialize in Your App

In your application's entry point (e.g., `App.tsx`), call the `init` function.

```typescript
import { init } from '@farukiince/click-tracker';

init({
  supabaseUrl: process.env.REACT_APP_SUPABASE_URL,
  supabaseAnonKey: process.env.REACT_APP_SUPABASE_ANON_KEY,
  // Optional: Add custom data to every click
  payload: {
    pagePath: window.location.pathname,
    userId: 'user-123'
  }
});
```
That's it! The library will now automatically track all `<button>` clicks.

## Configuration

The `init` function accepts an object with the following options:

| Parameter         | Type                  | Required | Default   | Description                                     |
| ----------------- | --------------------- | :------: | --------- | ----------------------------------------------- |
| `supabaseUrl`     | `string`              |   Yes    | `null`    | Your Supabase project URL.                      |
| `supabaseAnonKey` | `string`              |   Yes    | `null`    | Your Supabase project `anon` (public) key.      |
| `selector`        | `string`              |    No    | `'button'`| A CSS selector for the elements to track.       |
| `payload`         | `Record<string, any>` |    No    | `undefined`| A JSON object to be saved with every click.     |

## License

Licensed under the [MIT](LICENSE) License.